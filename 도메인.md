
## 서비스 개요

### 핵심 컨셉

- **보증금(참가비) 선결제**로 참여 동기 부여

- **출석률 기반 환급**(테스트 단계에서는 현금 환급 대신 **포인트 지급**)

- 게이미피케이션(레벨/신뢰도/뱃지 등)으로 지속 참여 유도


### 용어 정리(Glossary) 제안

- **참가비/보증금**: 스터디 참여를 위해 선결제하는 금액(5,000~50,000원)

- **환급**: 출석 결과에 따라 참가비의 일부/전부를 포인트로 반환

- **정산**: 스터디 종료 후 환급액 및 차감액(패널티)을 확정/지급하는 프로세스

- **스터디장**: 스터디 개설자이자 운영자 권한 보유


---

## 1. 사용자/권한

### 비회원(게스트)

- 스터디 목록/상세 조회, 검색/필터 가능

- 참가 신청/결제/채팅/게시글 작성 불가


### 회원(일반)

- 회원가입/프로필 관리(닉네임, 관심분야, 소개)

- 스터디 참가 신청, 결제, 출석 체크, 게시판/채팅 참여

- 중도 탈퇴 가능(정책 적용)


### 스터디장(리더)

- 스터디 개설/관리(모집/공지/강퇴/조기종료 요청 등 “운영권한”)

- 공지 메시지(채팅/게시판) 고정 가능

- 최소/최대 인원, 일정, 참가비 등 “고정 조건” 관리


### 운영자(Admin) **추가 권장**

- 신고 처리(게시글/채팅), 유저 제재, 스터디 강제 종료, 환급 분쟁 처리

- 카테고리/난이도/정책 설정 관리


---

## 2. 회원(계정/프로필/포인트)

### 인증/계정

- 로그인: 일반 로그인 + 소셜 로그인

- 비밀번호 재설정: 이메일 기반(토큰 만료/재발급 필요)

- 이메일 인증: “추후 예정”


### 프로필

- 닉네임 규칙

    - 한글/영문/숫자, 2~20자, **중복 불가**

    - 금칙어/욕설 필터 **추가 권장**

- 관심 분야, 자기소개 수정 가능


### 포인트

- 회원가입 시 **기본 1,000 포인트 지급**

- 포인트 사용처는 추후(현재는 적립/조회만)


### 감사/추적용 시간 데이터

- 등록 시간(createdAt)

- 가입 완료 시간(verifiedAt 또는 activatedAt)

- 탈퇴 시간(withdrawnAt)


---

## 3. 스터디 도메인

### 스터디 상태(권장)

- `PENDING`(개설 결제 대기)

- `RECRUITING`(모집중)

- `RECRUIT_CLOSED`(모집마감)

- `CONFIRMED`(최소 인원 충족, 시작 대기)

- `RUNNING`(진행중)

- `COMPLETED`(종료)

- `CANCELED`(취소: 인원 미달/운영자/스터디장 조기종료 포함)

- `SETTLED`(정산 완료)



    -  **참가자가 1명이라도 결제 완료하면** 아래 항목 변경 불가
        
        - 시작일/기간/일정(요일·시간), 참가비, 최소·최대 인원, 공개/비공개, 난이도, 모집마감일


---

## 4. 스터디 개설

### 개설 공통 규칙

- 개설 시 스터디장은 자동 승인(“스터디장 자격 자동 승인”)

- 결제까지 완료해야 개설 완료(= `RECRUITING` 진입)

- 선착순 마감

- 최소 인원 미달 시 자동 취소 처리


### 날짜/모집 규칙

- 시작일은 **“오늘로부터 3일 후” 이상** (일 단위)

- 모집 마감일 = **시작일 - 1일**

- 예: 오늘 12/23이면 시작일 최소 12/26 , 모집마감 12/25



### 개설 상세 정보

- 기본 정보: 제목, 설명, 썸네일

- 분류: 주제/카테고리(개발/외국어/자격증 등), 난이도(입문/초급/중급/고급)

- 운영 방식:

    - 일정(예: 매주 월수금 20:00~21:00)

    - 주 n회, 시간대, 총 기간(주)

- 인원/비용:

    - 최소/최대 참가 인원

    - 참가비(5,000~50,000원)

- 노출:

    - 공개/비공개

    - 비공개일 경우: **가입 코드/초대 링크** 중 하나는 필요(추가 권장)


### 최소 인원 미달 자동취소

- 트리거: 모집마감 시점(`RECRUIT_CLOSED`)에 `paid_participants < min`

- 처리:

    - 스터디 상태 `CANCELED`

    - 결제 완료 참가자 전원 **전액 환불/포인트 환급**

    - 알림 발송(참가자/스터디장)


---

## 5. 스터디 참가(신청/결제/합류)

### 참가 플로우

1. 회원이 스터디 상세에서 “참가 신청”

2. 결제 진행(참가비/보증금)

3. 결제 성공 시 “참가 완료” 상태로 전환

4. 채팅방 자동 입장 + 스터디 게시판 접근 권한 부여


### 참가 상태(권장)


- `PAYMENT_PENDING`(결제중)

- `ACTIVE`(결제 완료, 참가 확정)

- `WITHDRAWN`(중도 탈퇴)

- `EXPELLED`(강퇴)




---

## 6. 출석(체크인/체크아웃) 규칙


### 출석 체크 설계

- **체크인(시작 출석)**: 시작 30분 전 ~ 시작 10분 후

- **체크아웃(종료 출석)**: 종료 10분 전 ~ 종료 30분 후  
  (종료 체크 범위는 운영상 안정적이며, “종료 시 체크” 요구사항을 충족)


### 출석 판정

- 출석: 체크인 + 체크아웃 모두 완료

- 지각/부분출석: 체크인만 또는 체크아웃만

- 결석: 둘 다 미완료 또는 정책 기준 미달



---

## 7. 패널티/환급/정산

### 환불(시작 전) 정책

- 모집 기간 동안(= 시작일 하루 전까지)만 환불 가능

- **시작 전**: 전액 환불

- **시작 후**: 시작일 00:00 , 환불 불가


### 결석 패널티

- 결석 1회당 **1,000원 차감**

- 차감은 “환급액”에서 공제(= 보증금에서 차감)


#### 추가로 명확히 해야 하는 항목

1. **지각/부분출석**을 결석으로 볼지 여부

2. 패널티 상한: 보증금보다 더 차감될 수 없음(= 최소 0원까지)

3. 차감된 금액(패널티 풀)의 처리:

    - 옵션 A: **플랫폼 수수료/운영비**

    - 옵션 B: **출석자에게 보너스 분배**


### 환급(정산) 시점

- 스터디 마감 후 1~3일 뒤(테스트용) 포인트 지급


#### “미환급 금액” 처리

- 위 패널티 풀과 동일하게 처리 정책을 명시

-  MVP는 **플랫폼 귀속**(단순), 이후 “출석 우수자 분배”로 확장


### 조기 종료/취소 시 정산

- 인원 미달 등 정당 사유 취소: 전액 환불/포인트 환급

- 스터디장 부당 종료:

    - 참가자 보상 + 스터디장 패널티(구체화 필요)

    - 예: 참가자 전원 전액 환급 + 스터디장 신뢰도/레벨 점수 차감 + 일정 기간 개설 제한


---

## 8. 스터디 운영 기능(게시판/채팅)

### 게시판

- 주차별 학습자료 공유

- 질문/답변

- 카테고리: 질문/공지/정보

- **추가 권장**

    - 공지 상단 고정

    - 신고/블라인드

    - 첨부파일/링크 미리보기


### 채팅방

- 실시간 토론/질의응답

- 스터디장 공지 기능, 공지 메시지 고정

- 입장 메시지

- **추가 권장**

    - 읽음 처리(선택)

    - 신고/뮤트

    - 이미지 업로드 정책(용량/확장자)


---

## 9. 평점/레벨/신뢰도(게이미피케이션)

### 레벨(활동 점수)

- 출석 1회: +5

- 스터디 완료: +50

- 100% 출석: +100

- 레벨 구간:

    - Lv1 (0-99), Lv2 (100-299), Lv3 (300-599), Lv4 (600+)

- 레벨업 보너스 포인트: 레벨당 1,000pt


**개선 권장**

- “출석 1회”가 체크인/체크아웃 기준인지 명확히

- “스터디 완료”는 `COMPLETED` + 참가자 상태 `JOINED` 유지 조건으로 정의


### 신뢰도 점수

- 완주한 스터디 수

- 출석률 평균  
  **추가 권장**

- 중도탈퇴율, 신고/제재 이력(운영자만 노출)도 내부 지표로는 유용


---

## 10. 알림(Notifications)

### 알림 트리거

- 참가 완료(결제 성공)

- 스터디 시작 30분 전(출석 알림)

- 환급/정산 완료

- 레벨업


**추가**

- 모집 마감 D-1 / 마감 임박

- 최소 인원 달성/미달 취소

- 공지 등록

- 출석 실패(결석 판정 시)


---

## 11. 검색/필터링

- 키워드: 제목/설명 검색

- 필터:

    - 카테고리(개발/언어/자격증/취미…)

    - 난이도

    - 기간(2주/4주/8주 등)

    - 참가비 범위

- 정렬:

    - 최신순

    - 인기순(정의 필요: 조회수/참가자/완료율 등)

    - 시작 임박순


**추가**

- “모집중만 보기” 토글

- “내 관심 분야” 기반 추천(후순위)


---

## 12. 결제(토스 API)

- 테스트키 사용(실결제 차감 없음)

- ** 넣어야 할 것**

    1. 결제 성공/실패/취소 상태 모델링

    2. **웹훅 처리**(결제 결과를 신뢰할 단일 소스)

    3. **멱등성(Idempotency)**: 같은 결제가 중복 반영되지 않도록

    4. 환불 요청 시 결제 취소 API 연동(시작 전 전액 환불)


---

## 13. 추가하면 좋은 부분


- 신고/제재(채팅/게시글), 금칙어/스팸 방지

- 뱃지/퀘스트(연속 출석, 주차별 과제 등)




---


